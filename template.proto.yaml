## Proto Converter 配置模板（v2，import/export 结构）

# 运行与路径
# - 使用 -w/--workdir 指定“工作目录”；YAML 内相对路径均以该目录为基准。
# - 使用 -c/--config 指定本 YAML 文件（相对启动目录解析）；程序会先 chdir 到工作目录再执行。
# - 程序仅进行 .proto 裁剪/重写，不调用 protoc/protogen；输出为新的 .proto 文件。

# 全局：演练模式（可选）
# true 仅打印将执行的操作；false 实际写文件。
dryRun: false

import:
  # 源码根目录。将被深度扫描并作为 import 搜索根；留空则默认深度扫描当前工作目录。
  dir: external/proto

  # 是否裁剪（默认 true）。
  # - true：仅导出种子文件中被选择的顶层定义及其依赖定义。
  # - false：把所有可达的 .proto 都视为种子，默认保留其全部顶层定义。
  prune: true

  # 选择要导出的内容
  keep:
    # 文件级：声明“种子” proto 文件与需要保留的顶层定义（message/enum）。
    # - file 支持省略 .proto 扩展名。
    files:
      # 示例：仅给出一个最小 seeds 列表（保留该文件内全部顶层定义）
      # - file: cli/account.proto

      # 示例：只保留指定顶层定义
      # - file: shared/structs
      #   keep: [Identifier, Pair, ErrorCode]

    # 类型级：对特定 message 的字段进行裁剪，仅保留 keep 中的字段名。
    types:
      # - type: shared.Identifier   # 可用短名 Message 或全名 package.Message
      #   keep: [ContextType, LogType]

export:
  # 输出 .proto 的目录（相对工作目录）。
  dir: out

  # 目标语言（必填）：控制命名空间 option 写入。
  # 支持 csharp/cs/c#、golang/go、lua。
  language: csharp

  # 命名空间；为空则不写任何语言相关 option。
  namespace: Export.Proto

  # 输出文件名风格（含 .proto 扩展前的部分）：
  # - camel   默认，例：foo_bar.proto => FooBar.proto
  # - snake   例：FooBar.proto      => foo_bar.proto
  # - compact 全小写无分隔，例：FooBar.proto => foobar.proto
  fileNameCase: camel

  # 字段命名风格（仅作用于 message 顶层字段名）：camel（默认）/snake/compact。
  fieldNameCase: camel

# 其他说明
# - package：会保留源文件中的原始 package 行；仅移除“当前文件自身”的包限定前缀（避免自包内冗余），
#   跨包引用如 otherpkg.Type 将被保留。
# - import：会根据裁剪后的实际依赖重新计算；同时保留对 well-known types（google/protobuf/*）的必要导入。
# - 文件搜索：除 import.dir 外，程序会扫描工作目录作为额外根，方便只设置 workdir 的场景。
